<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · MuJoCo.jl</title><meta name="title" content="Getting Started · MuJoCo.jl"/><meta property="og:title" content="Getting Started · MuJoCo.jl"/><meta property="twitter:title" content="Getting Started · MuJoCo.jl"/><meta name="description" content="Documentation for MuJoCo.jl."/><meta property="og:description" content="Documentation for MuJoCo.jl."/><meta property="twitter:description" content="Documentation for MuJoCo.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="MuJoCo.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MuJoCo.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Introduction</span><ul><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Basic-Usage"><span>Basic Usage</span></a></li><li><a class="tocitem" href="#Visualising-a-Model"><span>Visualising a Model</span></a></li><li><a class="tocitem" href="#Visualising-a-Trajectory"><span>Visualising a Trajectory</span></a></li></ul></li><li><a class="tocitem" href="../overview/">Package Overview</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/cartpole_balance/">Balancing a Cart-Pole</a></li><li><a class="tocitem" href="../../examples/humanoid_lqr/">Humanoid LQR</a></li></ul></li><li><span class="tocitem">Contributing</span><ul><li><a class="tocitem" href="../../contributing/developing/">Contributing to the Package</a></li></ul></li><li><a class="tocitem" href="../../library/api/">API</a></li><li><span class="tocitem">C Bindings</span><ul><li><a class="tocitem" href="../../library/libmujoco/">API</a></li><li><a class="tocitem" href="../../library/libmujoco_index/">Index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Introduction</a></li><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JamieMair/MuJoCo.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JamieMair/MuJoCo.jl/blob/main/docs/src/intro/getting_started.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>To install <code>MuJoCo.jl</code>, simply run the following code in a Julia REPL:</p><pre><code class="language-julia hljs">import Pkg
Pkg.add(&quot;MuJoCo.jl&quot;)</code></pre><p>This will download and install the package, along with the underlying C library. We highly recommend activating a project to manage dependencies - see the <a href="https://docs.julialang.org/en/v1/stdlib/Pkg/">docs</a> for more information.</p><p>Once installed, you can load the package in the REPL just like any other Julia package. To use the visualiser and see your MuJoCo models in action, you will need to install some additional dependencies with</p><pre><code class="language-julia hljs">using MuJoCo
install_visualiser()</code></pre><h2 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h2><p>You should now be able to load in and play around with any MuJoCo model of your choosing. You can create your own MuJoCo models with the <a href="https://mujoco.readthedocs.io/en/stable/XMLreference.html">MJCF modelling language</a>, but for now we&#39;ll load in a model of a humanoid for demonstration purposes.</p><pre><code class="language-julia hljs">using MuJoCo

model, data = MuJoCo.sample_model_and_data()
@show typeof(model), typeof(data)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(Model, Data)</code></pre><p>The <code>Model</code> and <code>Data</code> types encode all the information required to simulate a model in MuJoCo, and are wrappers of the <code>mjModel</code> and <code>mjData</code> structs in the C API, respectively. We can directly access any data from these structs:</p><pre><code class="language-julia hljs">println(&quot;Simulation timestep: &quot;, model.opt.timestep)
println(&quot;Positions of joints: &quot;, data.qpos)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Simulation timestep: 0.005
Positions of joints: [0.0; 0.0; 1.282; 1.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0;;]</code></pre><p>We can also directly read and write from/to these fields. However, we cannot directly overwrite any arrays. Instead, we can use Julia&#39;s broadcasting to set values as we see fit. Let&#39;s write a function that inputs random control torques to the humanoid&#39;s joints.</p><pre><code class="language-julia hljs">function random_controller!(m::Model, d::Data)
    nu = m.nu
    d.ctrl .= 2*rand(nu) .- 1
    return nothing
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">random_controller! (generic function with 1 method)</code></pre><p>We can now simulate motion of the humanoid under this control scheme. Let&#39;s simulate over 100 time-steps.</p><pre><code class="language-julia hljs">for t in 1:100
    random_controller!(model, data)
    step!(model, data)
end</code></pre><p>At each time-step, <code>random_controller!</code> sets the control signal to some random value, and <code>step!</code> calls the MuJoCo physics engine to simulate the response of the system. <code>step!</code> directly modifies the <code>data</code> struct. For example, looking at <code>data.qpos</code> again shows that the joints have all moved.</p><pre><code class="language-julia hljs">println(&quot;New joint positions: &quot;, data.qpos)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">New joint positions: [-0.0021574700790556543; 0.000858101172879813; 0.8272427361630172; 0.9795992374642234; 0.08372375860647698; -0.056517602018050485; 0.17372802556422626; -0.21411466327044612; -0.40876530936651334; -0.36311567666209077; 0.15768531543386477; -0.1453016219216078; -0.1258175162560627; -2.3989213582424305; -0.4911387287352141; -0.8325813980809033; -0.0361955942471055; -0.26714480313500444; -0.007910416651108289; -2.5495906327916553; 0.5257821536549718; -0.8121027439537024; 0.7412610151510891; -1.4770959398696744; 0.89400356229581; 0.5811618827366134; -0.5695541578096686; -1.924115523764815;;]</code></pre><p>After finishing our initial simulations, we can re-set the model back to its starting position by calling <code>mj_resetData</code>, one of the underlying C library functions. Any of the functions listed in the <a href="../../library/libmujoco_index/#LibMuJoCo-Index">LibMuJoCo Index</a> can be used just as they are described in the <a href="https://mujoco.readthedocs.io/en/stable/APIreference/index.html">MuJoCo documentation</a>.</p><pre><code class="language-julia hljs">mj_resetData(model, data)
println(&quot;Reset joint positions: &quot;, data.qpos)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Reset joint positions: [0.0; 0.0; 1.282; 1.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0; 0.0;;]</code></pre><h2 id="Visualising-a-Model"><a class="docs-heading-anchor" href="#Visualising-a-Model">Visualising a Model</a><a id="Visualising-a-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Visualising-a-Model" title="Permalink"></a></h2><p>Of course, the best way to understand what a MuJoCo model is doing is to visualise it. To use the visualiser, simply initialise it and call <a href="../../library/api/#MuJoCo.Visualiser.visualise!"><code>visualise!</code></a>. We can test our controller by passing in our function via the <code>controller</code> keyword.</p><pre><code class="language-julia hljs">init_visualiser()
visualise!(model, data, controller=random_controller!)</code></pre><p><img src="../humanoid_random_demo.gif" alt/></p><p>Press <code>F1</code> for help after running the visualiser to print the available options in a terminal. Some of the most interesting are:</p><ul><li>Press <code>CTRL+RightArrow</code> (or <code>CMD</code> for Mac) to cycle between the passive dynamics and the controlled motion</li><li>Press <code>SPACE</code> to pause/unpause</li><li>Double-click on an object select it</li><li><code>CTRL+RightClick</code> and drag to apply a force</li><li>Press <code>Backspace</code> to reset the model</li><li>Press <code>ESC</code> to exit the simulation</li></ul><h2 id="Visualising-a-Trajectory"><a class="docs-heading-anchor" href="#Visualising-a-Trajectory">Visualising a Trajectory</a><a id="Visualising-a-Trajectory-1"></a><a class="docs-heading-anchor-permalink" href="#Visualising-a-Trajectory" title="Permalink"></a></h2><p>Sometimes it will be more convenient to simulate the motion of a MuJoCo model and save its response for later analysis. The visualiser includes a <code>Trajectory</code> mode to enable this. Let&#39;s <a href="../../library/api/#MuJoCo.reset!-Tuple{Model, Data}"><code>reset!</code></a> our humanoid model and set its initial height to 2 metres above the ground.</p><pre><code class="language-julia hljs">reset!(model, data)
data.qpos[3] = 2
forward!(model, data) # Propagate the physics forward</code></pre><p>The motion of every MuJoCo model can be described by some physical <a href="https://mujoco.readthedocs.io/en/stable/computation/index.html#physics-state">state vector</a> consisting of the positions and velocities of its components, and the state of its actuators. We have included <a href="../../library/api/#MuJoCo.get_physics_state-Tuple{Model, Data}"><code>get_physics_state</code></a> and <a href="../../library/api/#MuJoCo.set_physics_state!-Tuple{Model, Data, AbstractVector}"><code>set_physics_state!</code></a> to allow users to record (and set) the states of a model during simulation. Let&#39;s simulate our humanoid for another 100 timesteps and record its state.</p><pre><code class="language-julia hljs">tmax = 400
nx = model.nq + model.nv + model.na # State vector dimension
states = zeros(nx, tmax)
for t in 1:tmax
    states[:,t] = get_physics_state(model, data)
    step!(model, data)
end</code></pre><p>We&#39;ll also go back and save the humanoid states under our random controller. </p><pre><code class="language-julia hljs">reset!(model, data)
ctrl_states = zeros(nx, tmax)
for t in 1:tmax
    ctrl_states[:,t] = get_physics_state(model, data)
    random_controller!(model, data)
    step!(model, data)
end</code></pre><p>We can now play back either the passive or controlled humanoid motion whenever we like using the <code>Trajectory</code> mode in the visualiser. This allows us to re-wind the simulation, simulate it backwards, skip forward/backwards a few frames, and add some cool visualisation features.</p><pre><code class="language-julia hljs">visualise!(model, data, trajectories = [states, ctrl_states])</code></pre><p><img src="../humanoid_trajectories.gif" alt/></p><p>You might find the following tips useful:</p><ul><li>Press <code>CTRL+RightArrow</code> (or <code>CMD</code> for Mac) to cycle between the passive dynamics and the saved trajectories</li><li>Press <code>F1</code> to see the new <code>Trajectory</code> mode button and mouse options, including:<ul><li>Press <code>UP</code> or <code>DOWN</code> to cycle between trajectories</li><li>PRESS <code>CTRL+R</code> for reverse mode</li><li>Press <code>CTRL+B</code> to turn burst-mode on</li><li>Press <code>CTRL+D</code> to add a doppler shift</li></ul></li></ul><p>We strongly recommend saving trajectories for later visualisation if you&#39;re simulating any particularly complicated tasks in MuJoCo. You can start up the visualiser with all three of the passive dynamics, controlled dynamics, and saved trajectories. See <a href="../../library/api/#MuJoCo.Visualiser.visualise!"><code>visualise!</code></a> for details.</p><p>Happy visualising!</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../overview/">Package Overview »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Wednesday 3 July 2024 11:12">Wednesday 3 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
